<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ranking ELO Super Tres-en-raya</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    
    .animate-fade-in-up {
      animation: fadeInUp 0.5s ease-out forwards;
    }
    
    .animate-fade-in {
      animation: fadeIn 0.4s ease-out forwards;
    }
    
    .stagger-1 { animation-delay: 0.05s; }
    .stagger-2 { animation-delay: 0.1s; }
    .stagger-3 { animation-delay: 0.15s; }
    .stagger-4 { animation-delay: 0.2s; }
    .stagger-5 { animation-delay: 0.25s; }
    .stagger-6 { animation-delay: 0.3s; }
    .stagger-7 { animation-delay: 0.35s; }
    .stagger-8 { animation-delay: 0.4s; }
    .stagger-9 { animation-delay: 0.45s; }
    
    tbody tr {
      opacity: 0;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50">
  <div class="max-w-6xl mx-auto p-4 md:p-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <div class="flex items-center justify-center gap-3 mb-4">
        <svg class="w-10 h-10 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
        </svg>
        <h1 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
          Ranking ELO
        </h1>
        <svg class="w-10 h-10 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
        </svg>
      </div>
      <p class="text-xl text-gray-600 font-semibold">Super Tres-en-Raya</p>
      
      <a href="https://poque-creator.github.io/Super-Tres-En-Raya/" target="_blank" rel="noopener noreferrer"
         class="inline-flex items-center gap-2 mt-4 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
        </svg>
        Jugar Ahora
      </a>
    </div>

    <!-- Tabs -->
    <div class="flex gap-4 mb-6 justify-center flex-wrap">
      <button onclick="changeTab('ranking')" id="tab-ranking"
              class="flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all bg-blue-600 text-white shadow-lg">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
        </svg>
        Ranking
      </button>
      <button onclick="changeTab('matches')" id="tab-matches"
              class="flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all bg-white text-gray-700 hover:bg-gray-100">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
        </svg>
        Partidos
      </button>
      <button onclick="changeTab('stats')" id="tab-stats"
              class="flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all bg-white text-gray-700 hover:bg-gray-100">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
        </svg>
        Estadísticas
      </button>
    </div>

    <!-- Ranking Tab -->
    <div id="content-ranking" class="block animate-fade-in">
      <div class="bg-white rounded-2xl shadow-2xl overflow-hidden">
        <div class="bg-gradient-to-r from-blue-600 to-purple-600 p-6">
          <h2 class="text-2xl font-bold text-white flex items-center gap-2">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
            </svg>
            Clasificación
          </h2>
        </div>
        
        <!-- Filtros -->
        <div class="p-6 bg-gray-50 border-b border-gray-200">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2">
                Partidos Mínimos: <span id="min-games-value">0</span>
              </label>
              <input type="range" min="0" max="10" value="0" id="min-games-filter" oninput="updateFilters()"
                     class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
            </div>
            
            <div class="flex items-end">
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="active-only-filter" onchange="updateFilters()"
                       class="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500">
                <span class="text-sm font-semibold text-gray-700">Solo jugadores activos</span>
              </label>
            </div>
          </div>
          
          <div class="mt-4 text-sm text-gray-600">
            Mostrando <span class="font-bold text-blue-600" id="filtered-count">9</span> de 9 jugadores
          </div>
        </div>
        
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead class="bg-blue-100">
              <tr>
                <th class="px-6 py-4 text-left font-bold text-blue-900">Top</th>
                <th class="px-6 py-4 text-left font-bold text-blue-900 cursor-pointer hover:bg-blue-200 transition-colors" onclick="sortTable('name')">
                  Jugador <span id="sort-name"></span>
                </th>
                <th class="px-6 py-4 text-center font-bold text-blue-900 cursor-pointer hover:bg-blue-200 transition-colors" onclick="sortTable('elo')">
                  ELO <span id="sort-elo"></span>
                </th>
                <th class="px-6 py-4 text-center font-bold text-blue-900 cursor-pointer hover:bg-blue-200 transition-colors" onclick="sortTable('played')">
                  Jugados <span id="sort-played"></span>
                </th>
                <th class="px-6 py-4 text-center font-bold text-blue-900 cursor-pointer hover:bg-blue-200 transition-colors" onclick="sortTable('w')">
                  V <span id="sort-w"></span>
                </th>
                <th class="px-6 py-4 text-center font-bold text-blue-900 cursor-pointer hover:bg-blue-200 transition-colors" onclick="sortTable('d')">
                  E <span id="sort-d"></span>
                </th>
                <th class="px-6 py-4 text-center font-bold text-blue-900 cursor-pointer hover:bg-blue-200 transition-colors" onclick="sortTable('l')">
                  D <span id="sort-l"></span>
                </th>
                <th class="px-6 py-4 text-center font-bold text-blue-900 cursor-pointer hover:bg-blue-200 transition-colors" onclick="sortTable('winrate')">
                  % Victorias <span id="sort-winrate"></span>
                </th>
              </tr>
            </thead>
            <tbody id="players-table"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Matches Tab -->
    <div id="content-matches" class="hidden">
      <div class="bg-white rounded-2xl shadow-2xl p-6">
        <div class="flex items-center gap-2 mb-6">
          <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
          </svg>
          <h2 class="text-2xl font-bold text-gray-800">Historial de Partidos</h2>
        </div>
        <div class="space-y-3" id="matches-list"></div>
      </div>
    </div>

    <!-- Stats Tab -->
    <div id="content-stats" class="hidden">
      <div class="bg-white rounded-2xl shadow-2xl p-6">
        <div class="flex items-center gap-2 mb-6">
          <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
          </svg>
          <h2 class="text-2xl font-bold text-gray-800">Estadísticas Generales</h2>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="bg-gradient-to-br from-blue-100 to-blue-200 p-6 rounded-xl">
            <p class="text-gray-700 font-semibold mb-2">Total Jugadores</p>
            <p class="text-4xl font-bold text-blue-700">9</p>
          </div>
          
          <div class="bg-gradient-to-br from-green-100 to-green-200 p-6 rounded-xl">
            <p class="text-gray-700 font-semibold mb-2">Partidos Jugados</p>
            <p class="text-4xl font-bold text-green-700">7</p>
          </div>
        </div>

        <div class="mt-8">
          <h3 class="text-xl font-bold text-gray-800 mb-4">Top 3 Jugadores</h3>
          <div class="space-y-3" id="top3-list"></div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="text-center mt-8 text-gray-600">
      <p class="font-semibold">Hugo &gt; Jhona</p>
    </footer>
  </div>

  <script>
    const players = [
      { name: 'Jose', elo: 12, w: 2, d: 0, l: 0 },
      { name: 'Jhonatan', elo: 6, w: 1, d: 0, l: 2 },
      { name: 'Samuel', elo: 0, w: 0, d: 0, l: 1 },
      { name: 'Hugo', elo: 11, w: 2, d: 0, l: 1 },
      { name: 'Victor', elo: 13, w: 2, d: 0, l: 1 },
      { name: 'Ouxiang', elo: 0, w: 0, d: 0, l: 2 },
      { name: 'Andrei', elo: 0, w: 0, d: 0, l: 0 },
      { name: 'Josias', elo: 0, w: 0, d: 0, l: 0 },
      { name: 'Jose Ignacio de Economía', elo: 0, w: 0, d: 0, l: 0 }
    ];

    const matches = [
      'Hugo - Ouxiang (Victoria Hugo, +10 elo)',
      'Jhonatan - Samuel (Victoria Jhonatan, +10 elo)',
      'Victor - Jose (Victoria Jose, +10 elo)',
      'Hugo - Jhonatan (Victoria Hugo, +5 elo. Derrota Jhonatan, -3 elo)',
      'Victor - Ouxiang (Victoria Victor, +9 elo)',
      'Jose - Jhonatan (Victoria Jose, +2 elo. Derrota Jhonatan, -1 elo)',
      'Hugo - Victor (Victoria Victor, +4 elo. Derrota Hugo, -4 elo)'
    ];

    let currentSort = { key: 'elo', direction: 'desc' };

    function changeTab(tab) {
      ['ranking', 'matches', 'stats'].forEach(t => {
        const content = document.getElementById('content-' + t);
        const tabBtn = document.getElementById('tab-' + t);
        
        if (t === tab) {
          content.classList.remove('hidden');
          content.classList.add('block', 'animate-fade-in');
          tabBtn.className = 'flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all bg-blue-600 text-white shadow-lg';
          
          // Re-trigger animation
          setTimeout(() => {
            content.classList.remove('animate-fade-in');
            void content.offsetWidth; // Force reflow
            content.classList.add('animate-fade-in');
          }, 10);
        } else {
          content.classList.remove('block', 'animate-fade-in');
          content.classList.add('hidden');
          tabBtn.className = 'flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all bg-white text-gray-700 hover:bg-gray-100';
        }
      });
    }

    function sortTable(key) {
      if (currentSort.key === key) {
        currentSort.direction = currentSort.direction === 'desc' ? 'asc' : 'desc';
      } else {
        currentSort.key = key;
        currentSort.direction = 'desc';
      }
      renderTable();
    }

    function updateFilters() {
      document.getElementById('min-games-value').textContent = document.getElementById('min-games-filter').value;
      renderTable();
    }

    function getRankColor(rank) {
      if (rank === 1) return 'bg-gradient-to-r from-yellow-200 to-yellow-300';
      if (rank === 2) return 'bg-gradient-to-r from-gray-200 to-gray-300';
      if (rank === 3) return 'bg-gradient-to-r from-orange-200 to-orange-300';
      return 'bg-white hover:bg-blue-50';
    }

    function renderTable() {
      const minGames = parseInt(document.getElementById('min-games-filter').value);
      const activeOnly = document.getElementById('active-only-filter').checked;

      let filtered = players.map(p => {
        const played = p.w + p.d + p.l;
        const winrate = played > 0 ? ((p.w / played) * 100).toFixed(1) : 0;
        return {...p, played, winrate: parseFloat(winrate)};
      })
        .filter(p => p.played >= minGames && (!activeOnly || p.played > 0));

      filtered.sort((a, b) => {
        let aVal = a[currentSort.key];
        let bVal = b[currentSort.key];
        
        if (currentSort.key === 'name') {
          return currentSort.direction === 'asc' 
            ? aVal.localeCompare(bVal)
            : bVal.localeCompare(aVal);
        }
        
        return currentSort.direction === 'asc' ? aVal - bVal : bVal - aVal;
      });

      document.getElementById('filtered-count').textContent = filtered.length;

      ['name', 'elo', 'played', 'w', 'd', 'l', 'winrate'].forEach(k => {
        document.getElementById('sort-' + k).innerHTML = '';
      });

      const icon = currentSort.direction === 'asc' 
        ? '<svg class="w-4 h-4 inline ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>'
        : '<svg class="w-4 h-4 inline ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>';
      document.getElementById('sort-' + currentSort.key).innerHTML = icon;

      const tbody = document.getElementById('players-table');
      tbody.innerHTML = filtered.map((p, i) => `
        <tr class="${getRankColor(i + 1)} transition-colors border-b border-gray-200 animate-fade-in-up stagger-${Math.min(i + 1, 9)}">
          <td class="px-6 py-4 font-bold text-gray-800">${i + 1}</td>
          <td class="px-6 py-4 font-semibold text-gray-800">${p.name}</td>
          <td class="px-6 py-4 text-center">
            <span class="inline-block bg-blue-600 text-white px-3 py-1 rounded-full font-bold">${p.elo}</span>
          </td>
          <td class="px-6 py-4 text-center text-gray-700">${p.played}</td>
          <td class="px-6 py-4 text-center"><span class="text-green-600 font-bold">${p.w}</span></td>
          <td class="px-6 py-4 text-center"><span class="text-gray-600 font-bold">${p.d}</span></td>
          <td class="px-6 py-4 text-center"><span class="text-red-600 font-bold">${p.l}</span></td>
          <td class="px-6 py-4 text-center">
            <span class="font-bold ${p.winrate >= 66.7 ? 'text-green-600' : p.winrate >= 33.3 ? 'text-yellow-600' : 'text-red-600'}">
              ${p.winrate}%
            </span>
          </td>
        </tr>
      `).join('');
    }

    function renderMatches() {
      document.getElementById('matches-list').innerHTML = matches.map((m, i) => `
        <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-200 hover:shadow-md transition-shadow animate-fade-in-up stagger-${Math.min(i + 1, 9)}">
          <div class="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
            ${i + 1}
          </div>
          <p class="text-gray-700">${m}</p>
        </div>
      `).join('');
    }

    function renderTop3() {
      const top3 = [...players].sort((a, b) => b.elo - a.elo).slice(0, 3);
      document.getElementById('top3-list').innerHTML = top3.map((p, i) => `
        <div class="p-4 rounded-xl ${getRankColor(i + 1)} border-2 border-gray-300 animate-fade-in-up stagger-${i + 1}">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <span class="text-2xl font-bold text-gray-700">#${i + 1}</span>
              <span class="font-bold text-gray-800">${p.name}</span>
            </div>
            <div class="text-right">
              <p class="text-2xl font-bold text-blue-700">${p.elo} ELO</p>
              <p class="text-sm text-gray-600">${p.w}V - ${p.d}E - ${p.l}D</p>
            </div>
          </div>
        </div>
      `).join('');
    }

    renderTable();
    renderMatches();
    renderTop3();
  </script>
</body>
</html>
